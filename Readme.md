# test-unit-service
## Сборка
```make build``` собирает бинарники для миграции и самого сервиса

```make build_docker``` собирает Docker-образ

```make test``` тесты

## Запуск
```docker compose up``` для поднятия и постгрес базы и сервиса, предварительно необходимо собрать докер образ

```docker compose up -d postgres``` для поднятия только постгрес базы, далее неоходим выполнить ```make build```, запустить ./migrate_common для миграций и далее ./unit_service для запуска самого сервиса

## Настройки
через переменные окружения можно указать

 ```SERVER_ADDR``` - хост и порт для сервиса / :10000 по умолчанию

 ```POSTGRESQL_HOST``` - хост постгреса / 127.0.0.1 по умолчанию

 ```POSTGRESQL_DATABASE``` - название базы данных / unit_service_test по умолчанию

 ```LRU_CACHE_SIZE``` - размер lru кэша / 500 по умолчанию

 ```FETCH_UNITS_TIMEOUT``` - раз в сколько секунд(!) сервис будет синхронизировать локальное хранилище с базой / 3600 по умолчанию

 все настройки можно посмотреть в файле config/config.go